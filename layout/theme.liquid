<!doctype html>
<html class="js" lang="{{ request.locale.iso_code }}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="theme-color" content="">
    <link rel="canonical" href="{{ canonical_url }}">
    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">


    {%- if settings.favicon != blank -%}
      <link rel="icon" type="image/png" href="{{ settings.favicon | image_url: width: 32, height: 32 }}">
    {%- endif -%}

    {%- unless settings.type_header_font.system? and settings.type_body_font.system? -%}
      <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
    {%- endunless -%}

    <title>
      {{ page_title }}
      {%- if current_tags %} &ndash; tagged "{{ current_tags | join: ', ' }}"{% endif -%}
      {%- if current_page != 1 %} &ndash; Page {{ current_page }}{% endif -%}
      {%- unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless -%}
    </title>
    {% if template contains 'product' %}
      <link rel="canonical" href="{{ product.url | within: collection }}">
      {% elsif template contains 'collection' %}
      <link rel="canonical" href="{{ collection.url }}">
      {% elsif template contains 'page' %}
      <link rel="canonical" href="{{ page.url }}">
      {% elsif template contains 'blog' %}
      <link rel="canonical" href="{{ blog.url }}">
    {% endif %}

    {% if page_description %}
      <meta name="description" content="{{ page_description | escape }}">
    {% endif %}

    {% render 'meta-tags' %}

    <script src="{{ 'constants.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'pubsub.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'global.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'details-disclosure.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'details-modal.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'search-form.js' | asset_url }}" defer="defer"></script>

    {%- if settings.animations_reveal_on_scroll -%}
      <script src="{{ 'animations.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}

    {{ content_for_header }}

    {%- liquid
      assign body_font_bold = settings.type_body_font | font_modify: 'weight', 'bold'
      assign body_font_italic = settings.type_body_font | font_modify: 'style', 'italic'
      assign body_font_bold_italic = body_font_bold | font_modify: 'style', 'italic'
    %}

    {% style %}
      {{ settings.type_body_font | font_face: font_display: 'swap' }}
      {{ body_font_bold | font_face: font_display: 'swap' }}
      {{ body_font_italic | font_face: font_display: 'swap' }}
      {{ body_font_bold_italic | font_face: font_display: 'swap' }}
      {{ settings.type_header_font | font_face: font_display: 'swap' }}

      {% for scheme in settings.color_schemes -%}
        {% assign scheme_classes = scheme_classes | append: ', .color-' | append: scheme.id %}
        {% if forloop.index == 1 -%}
          :root,
        {%- endif %}
        .color-{{ scheme.id }} {
          --color-background: {{ scheme.settings.background.red }},{{ scheme.settings.background.green }},{{ scheme.settings.background.blue }};
        {% if scheme.settings.background_gradient != empty %}
          --gradient-background: {{ scheme.settings.background_gradient }};
        {% else %}
          --gradient-background: {{ scheme.settings.background }};
        {% endif %}

        {% liquid
          assign background_color = scheme.settings.background
          assign background_color_brightness = background_color | color_brightness
          if background_color_brightness <= 26
            assign background_color_contrast = background_color | color_lighten: 50
          elsif background_color_brightness <= 65
            assign background_color_contrast = background_color | color_lighten: 5
          else
            assign background_color_contrast = background_color | color_darken: 25
          endif
        %}

        --color-foreground: {{ scheme.settings.text.red }},{{ scheme.settings.text.green }},{{ scheme.settings.text.blue }};
        --color-background-contrast: {{ background_color_contrast.red }},{{ background_color_contrast.green }},{{ background_color_contrast.blue }};
        --color-shadow: {{ scheme.settings.shadow.red }},{{ scheme.settings.shadow.green }},{{ scheme.settings.shadow.blue }};
        --color-button: {{ scheme.settings.button.red }},{{ scheme.settings.button.green }},{{ scheme.settings.button.blue }};
        --color-button-text: {{ scheme.settings.button_label.red }},{{ scheme.settings.button_label.green }},{{ scheme.settings.button_label.blue }};
        --color-secondary-button: {{ scheme.settings.background.red }},{{ scheme.settings.background.green }},{{ scheme.settings.background.blue }};
        --color-secondary-button-text: {{ scheme.settings.secondary_button_label.red }},{{ scheme.settings.secondary_button_label.green }},{{ scheme.settings.secondary_button_label.blue }};
        --color-link: {{ scheme.settings.secondary_button_label.red }},{{ scheme.settings.secondary_button_label.green }},{{ scheme.settings.secondary_button_label.blue }};
        --color-badge-foreground: {{ scheme.settings.text.red }},{{ scheme.settings.text.green }},{{ scheme.settings.text.blue }};
        --color-badge-background: {{ scheme.settings.background.red }},{{ scheme.settings.background.green }},{{ scheme.settings.background.blue }};
        --color-badge-border: {{ scheme.settings.text.red }},{{ scheme.settings.text.green }},{{ scheme.settings.text.blue }};
        --payment-terms-background-color: rgb({{ scheme.settings.background.rgb }});
        --color-button-hover: {{ scheme.settings.button_hover.red }},{{ scheme.settings.button_hover.green }},{{ scheme.settings.button_hover.blue }};
      }
      {% endfor %}

      {{ scheme_classes | prepend: 'body' }} {
        color: rgba(var(--color-foreground), 0.75);
        background-color: rgb(var(--color-background));
      }
      body, h1, h2, h3{
        font-family: poppins,montserrat, sans-serif !important;
      }
      :root {
        --font-body-family: {{ settings.type_body_font.family }}, {{ settings.type_body_font.fallback_families }};
        --font-body-style: {{ settings.type_body_font.style }};
        --font-body-weight: {{ settings.font_weight }};
        --font-body-weight-bold: {{ settings.type_body_font.weight | plus: 300 | at_most: 1000 }};

        --font-heading-family: {{ settings.type_header_font.family }}, {{ settings.type_header_font.fallback_families }};
        --font-heading-style: {{ settings.type_header_font.style }};
        --font-heading-weight: {{ settings.type_header_font.weight }};

        --font-body-scale: {{ settings.body_scale | divided_by: 100.0 }};
        --font-heading-scale: {{ settings.heading_scale | times: 1.0 | divided_by: settings.body_scale }};

        --media-padding: {{ settings.media_padding }}px;
        --media-border-opacity: {{ settings.media_border_opacity | divided_by: 100.0 }};
        --media-border-width: {{ settings.media_border_thickness }}px;
        --media-radius: {{ settings.media_radius }}px;
        --media-shadow-opacity: {{ settings.media_shadow_opacity | divided_by: 100.0 }};
        --media-shadow-horizontal-offset: {{ settings.media_shadow_horizontal_offset }}px;
        --media-shadow-vertical-offset: {{ settings.media_shadow_vertical_offset }}px;
        --media-shadow-blur-radius: {{ settings.media_shadow_blur }}px;
        --media-shadow-visible: {% if settings.media_shadow_opacity > 0 %}1{% else %}0{% endif %};

        --page-width: {{ settings.page_width | divided_by: 10 }}rem;
        --page-width-margin: {% if settings.page_width == '1600' %}2{% else %}0{% endif %}rem;

        --product-card-image-padding: {{ settings.card_image_padding | divided_by: 10.0 }}rem;
        --product-card-corner-radius: {{ settings.card_corner_radius | divided_by: 10.0 }}rem;
        --product-card-text-alignment: {{ settings.card_text_alignment }};
        --product-card-border-width: {{ settings.card_border_thickness | divided_by: 10.0 }}rem;
        --product-card-border-opacity: {{ settings.card_border_opacity | divided_by: 100.0 }};
        --product-card-shadow-opacity: {{ settings.card_shadow_opacity | divided_by: 100.0 }};
        --product-card-shadow-visible: {% if settings.card_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --product-card-shadow-horizontal-offset: {{ settings.card_shadow_horizontal_offset | divided_by: 10.0 }}rem;
        --product-card-shadow-vertical-offset: {{ settings.card_shadow_vertical_offset | divided_by: 10.0 }}rem;
        --product-card-shadow-blur-radius: {{ settings.card_shadow_blur | divided_by: 10.0 }}rem;

        --collection-card-image-padding: {{ settings.collection_card_image_padding | divided_by: 10.0 }}rem;
        --collection-card-corner-radius: {{ settings.collection_card_corner_radius | divided_by: 10.0 }}rem;
        --collection-card-text-alignment: {{ settings.collection_card_text_alignment }};
        --collection-card-border-width: {{ settings.collection_card_border_thickness | divided_by: 10.0 }}rem;
        --collection-card-border-opacity: {{ settings.collection_card_border_opacity | divided_by: 100.0 }};
        --collection-card-shadow-opacity: {{ settings.collection_card_shadow_opacity | divided_by: 100.0 }};
        --collection-card-shadow-visible: {% if settings.collection_card_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --collection-card-shadow-horizontal-offset: {{ settings.collection_card_shadow_horizontal_offset | divided_by: 10.0 }}rem;
        --collection-card-shadow-vertical-offset: {{ settings.collection_card_shadow_vertical_offset | divided_by: 10.0 }}rem;
        --collection-card-shadow-blur-radius: {{ settings.collection_card_shadow_blur | divided_by: 10.0 }}rem;

        --blog-card-image-padding: {{ settings.blog_card_image_padding | divided_by: 10.0 }}rem;
        --blog-card-corner-radius: {{ settings.blog_card_corner_radius | divided_by: 10.0 }}rem;
        --blog-card-text-alignment: {{ settings.blog_card_text_alignment }};
        --blog-card-border-width: {{ settings.blog_card_border_thickness }}px;
        --blog-card-border-opacity: {{ settings.blog_card_border_opacity | divided_by: 100.0 }};
        --blog-card-shadow-opacity: {{ settings.blog_card_shadow_opacity | divided_by: 100.0 }};
        --blog-card-shadow-visible: {% if settings.blog_card_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --blog-card-shadow-horizontal-offset: {{ settings.blog_card_shadow_horizontal_offset | divided_by: 10.0 }}rem;
        --blog-card-shadow-vertical-offset: {{ settings.blog_card_shadow_vertical_offset | divided_by: 10.0 }}rem;
        --blog-card-shadow-blur-radius: {{ settings.blog_card_shadow_blur | divided_by: 10.0 }}rem;

        --badge-corner-radius: {{ settings.badge_corner_radius | divided_by: 10.0 }}rem;

        --popup-border-width: {{ settings.popup_border_thickness }}px;
        --popup-border-opacity: {{ settings.popup_border_opacity | divided_by: 100.0 }};
        --popup-corner-radius: {{ settings.popup_corner_radius }}px;
        --popup-shadow-opacity: {{ settings.popup_shadow_opacity | divided_by: 100.0 }};
        --popup-shadow-horizontal-offset: {{ settings.popup_shadow_horizontal_offset }}px;
        --popup-shadow-vertical-offset: {{ settings.popup_shadow_vertical_offset }}px;
        --popup-shadow-blur-radius: {{ settings.popup_shadow_blur }}px;

        --drawer-border-width: {{ settings.drawer_border_thickness }}px;
        --drawer-border-opacity: {{ settings.drawer_border_opacity | divided_by: 100.0 }};
        --drawer-shadow-opacity: {{ settings.drawer_shadow_opacity | divided_by: 100.0 }};
        --drawer-shadow-horizontal-offset: {{ settings.drawer_shadow_horizontal_offset }}px;
        --drawer-shadow-vertical-offset: {{ settings.drawer_shadow_vertical_offset }}px;
        --drawer-shadow-blur-radius: {{ settings.drawer_shadow_blur }}px;

        --spacing-sections-desktop: {{ settings.spacing_sections }}px;
        --spacing-sections-mobile: {% if settings.spacing_sections < 24 %}{{ settings.spacing_sections }}{% else %}{{ settings.spacing_sections | times: 0.7 | round | at_least: 20 }}{% endif %}px;

        --grid-desktop-vertical-spacing: {{ settings.spacing_grid_vertical }}px;
        --grid-desktop-horizontal-spacing: {{ settings.spacing_grid_horizontal }}px;
        --grid-mobile-vertical-spacing: {{ settings.spacing_grid_vertical | divided_by: 2 }}px;
        --grid-mobile-horizontal-spacing: {{ settings.spacing_grid_horizontal | divided_by: 2 }}px;

        --text-boxes-border-opacity: {{ settings.text_boxes_border_opacity | divided_by: 100.0 }};
        --text-boxes-border-width: {{ settings.text_boxes_border_thickness }}px;
        --text-boxes-radius: {{ settings.text_boxes_radius }}px;
        --text-boxes-shadow-opacity: {{ settings.text_boxes_shadow_opacity | divided_by: 100.0 }};
        --text-boxes-shadow-visible: {% if settings.text_boxes_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --text-boxes-shadow-horizontal-offset: {{ settings.text_boxes_shadow_horizontal_offset }}px;
        --text-boxes-shadow-vertical-offset: {{ settings.text_boxes_shadow_vertical_offset }}px;
        --text-boxes-shadow-blur-radius: {{ settings.text_boxes_shadow_blur }}px;

        --buttons-radius: {{ settings.buttons_radius }}px;
        --buttons-radius-outset: {% if settings.buttons_radius > 0 %}{{ settings.buttons_radius | plus: settings.buttons_border_thickness }}{% else %}0{% endif %}px;
        --buttons-border-width: {% if settings.buttons_border_opacity > 0 %}{{ settings.buttons_border_thickness }}{% else %}0{% endif %}px;
        --buttons-border-opacity: {{ settings.buttons_border_opacity | divided_by: 100.0 }};
        --buttons-shadow-opacity: {{ settings.buttons_shadow_opacity | divided_by: 100.0 }};
        --buttons-shadow-visible: {% if settings.buttons_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --buttons-shadow-horizontal-offset: {{ settings.buttons_shadow_horizontal_offset }}px;
        --buttons-shadow-vertical-offset: {{ settings.buttons_shadow_vertical_offset }}px;
        --buttons-shadow-blur-radius: {{ settings.buttons_shadow_blur }}px;
        --buttons-border-offset: {% if settings.buttons_radius > 0 or settings.buttons_shadow_opacity > 0 %}0.3{% else %}0{% endif %}px;

        --inputs-radius: {{ settings.inputs_radius }}px;
        --inputs-border-width: {{ settings.inputs_border_thickness }}px;
        --inputs-border-opacity: {{ settings.inputs_border_opacity | divided_by: 100.0 }};
        --inputs-shadow-opacity: {{ settings.inputs_shadow_opacity | divided_by: 100.0 }};
        --inputs-shadow-horizontal-offset: {{ settings.inputs_shadow_horizontal_offset }}px;
        --inputs-margin-offset: {% if settings.inputs_shadow_vertical_offset != 0 and settings.inputs_shadow_opacity > 0 %}{{ settings.inputs_shadow_vertical_offset | abs }}{% else %}0{% endif %}px;
        --inputs-shadow-vertical-offset: {{ settings.inputs_shadow_vertical_offset }}px;
        --inputs-shadow-blur-radius: {{ settings.inputs_shadow_blur }}px;
        --inputs-radius-outset: {% if settings.inputs_radius > 0 %}{{ settings.inputs_radius | plus: settings.inputs_border_thickness }}{% else %}0{% endif %}px;

        --variant-pills-radius: {{ settings.variant_pills_radius }}px;
        --variant-pills-border-width: {{ settings.variant_pills_border_thickness }}px;
        --variant-pills-border-opacity: {{ settings.variant_pills_border_opacity | divided_by: 100.0 }};
        --variant-pills-shadow-opacity: {{ settings.variant_pills_shadow_opacity | divided_by: 100.0 }};
        --variant-pills-shadow-horizontal-offset: {{ settings.variant_pills_shadow_horizontal_offset }}px;
        --variant-pills-shadow-vertical-offset: {{ settings.variant_pills_shadow_vertical_offset }}px;
        --variant-pills-shadow-blur-radius: {{ settings.variant_pills_shadow_blur }}px;
      }

      *,
      *::before,
      *::after {
        box-sizing: inherit;
      }

      html {
        box-sizing: border-box;
        font-size: calc(var(--font-body-scale) * 62.5%);
        height: 100%;
      }

      body {
        display: grid;
        grid-template-rows: auto auto 1fr auto;
        grid-template-columns: 100%;
        min-height: 100%;
        margin: 0;
        font-size: 1.5rem;
        letter-spacing: 0.06rem;
        line-height: calc(1 + 0.8 / var(--font-body-scale));
        font-family: var(--font-body-family);
        font-style: var(--font-body-style);
        font-weight: var(--font-body-weight);
      }

      @media screen and (min-width: 750px) {
        body {
          font-size: 1.6rem;
        }
      }
    {% endstyle %}

    {{ 'base.css' | asset_url | stylesheet_tag }}
    <link rel="stylesheet" href="{{ 'component-cart-items.css' | asset_url }}" media="print" onload="this.media='all'">

    {%- if settings.cart_type == 'drawer' -%}
      {{ 'component-cart-drawer.css' | asset_url | stylesheet_tag }}
      {{ 'component-cart.css' | asset_url | stylesheet_tag }}
      {{ 'component-totals.css' | asset_url | stylesheet_tag }}
      {{ 'component-price.css' | asset_url | stylesheet_tag }}
      {{ 'component-discounts.css' | asset_url | stylesheet_tag }}
    {%- endif -%}

    {%- unless settings.type_body_font.system? -%}
      {% comment %}theme-check-disable AssetPreload{% endcomment %}
      <link rel="preload" as="font" href="{{ settings.type_body_font | font_url }}" type="font/woff2" crossorigin>
      {% comment %}theme-check-enable AssetPreload{% endcomment %}
    {%- endunless -%}
    {%- unless settings.type_header_font.system? -%}
      {% comment %}theme-check-disable AssetPreload{% endcomment %}
      <link rel="preload" as="font" href="{{ settings.type_header_font | font_url }}" type="font/woff2" crossorigin>
      {% comment %}theme-check-enable AssetPreload{% endcomment %}
    {%- endunless -%}

    {%- if localization.available_countries.size > 1 or localization.available_languages.size > 1 -%}
      {{ 'component-localization-form.css' | asset_url | stylesheet_tag: preload: true }}
      <script src="{{ 'localization-form.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}

    {%- if settings.predictive_search_enabled -%}
      <link
        rel="stylesheet"
        href="{{ 'component-predictive-search.css' | asset_url }}"
        media="print"
        onload="this.media='all'"
      >
    {%- endif -%}

    <script>
      if (Shopify.designMode) {
        document.documentElement.classList.add('shopify-design-mode');
      }
    </script>
  </head>

  <body class="gradient{% if settings.animations_hover_elements != 'none' %} animate--hover-{{ settings.animations_hover_elements }}{% endif %}">
    <a class="skip-to-content-link button visually-hidden" href="#MainContent">
      {{ 'accessibility.skip_to_text' | t }}
    </a>

    {%- if settings.cart_type == 'drawer' -%}
      {%- render 'cart-drawer' -%}
    {%- endif -%}

    {% sections 'header-group' %}
    {% comment %}
    <!-- Global maintenance banner (header) -->
  <div id="dev-banner" class="dev-banner" role="status" aria-live="polite">
    <div class="dev-banner__inner">
      <span class="dev-banner__icon" aria-hidden="true">⚠️</span>
      <span class="dev-banner__text">
        <strong>Site en maintenance :</strong>
        certaines informations, notamment les prix, peuvent être inexactes.
        Merci de confirmer le tarif via
        <a class="dev-banner__link" href="https://wa.me/212656260117" target="_blank" rel="noopener">WhatsApp</a>
        avant toute commande.
      </span>
      <button class="dev-banner__close" type="button" aria-label="Fermer l’avis">&times;</button>
    </div>
  </div>

  {% comment %} Styling of the warning {% endcomment %}
  <style>
    /* Global header maintenance banner */
    .dev-banner{
      width:100%;
      background:#fff3cd; color:#5c4700; border-bottom:1px solid #ffe8a1;
      font-size:14px;
    }
    .dev-banner__inner{
      max-width: var(--page-width, 1200px);
      margin:0 auto; padding:10px 16px;
      display:flex; align-items:center; gap:10px;
    }
    .dev-banner__icon{ font-size:16px; line-height:1; }
    .dev-banner__text{ line-height:1.5; }
    .dev-banner__link{ color:inherit; text-decoration:underline; }
    .dev-banner__close{
      margin-left:auto; background:transparent; border:0;
      font-size:20px; line-height:1; cursor:pointer; color:inherit;
    }
    @media (max-width:480px){
      .dev-banner__inner{ padding:8px 12px; }
      .dev-banner{ font-size:13px; }
    }
  </style>
{% endcomment %}
    <main id="MainContent" class="content-for-layout focus-none" role="main" tabindex="-1">
      {{ content_for_layout }}
    </main>

    {% sections 'footer-group' %}

    <ul hidden>
      <li id="a11y-refresh-page-message">{{ 'accessibility.refresh_page' | t }}</li>
      <li id="a11y-new-window-message">{{ 'accessibility.link_messages.new_window' | t }}</li>
    </ul>

    <script>


      /* warning script */


        (function(){
    var b = document.getElementById('dev-banner');
    if (!b) return;

    // Hide if previously dismissed
    try {
      if (localStorage.getItem('dev_banner_dismissed') === '1') { b.remove(); return; }
    } catch(e){}

    var closeBtn = b.querySelector('.dev-banner__close');
    if (closeBtn) {
      closeBtn.addEventListener('click', function(){
        try { localStorage.setItem('dev_banner_dismissed', '1'); } catch(e){}
        b.remove();
      });
    }
  })();

  /* End of warning script */

      window.shopUrl = '{{ request.origin }}';
      window.routes = {
        cart_add_url: '{{ routes.cart_add_url }}',
        cart_change_url: '{{ routes.cart_change_url }}',
        cart_update_url: '{{ routes.cart_update_url }}',
        cart_url: '{{ routes.cart_url }}',
        predictive_search_url: '{{ routes.predictive_search_url }}',
      };

      window.cartStrings = {
        error: `{{ 'sections.cart.cart_error' | t }}`,
        quantityError: `{{ 'sections.cart.cart_quantity_error_html' | t: quantity: '[quantity]' }}`,
      };

      window.variantStrings = {
        addToCart: `{{ 'products.product.add_to_cart' | t }}`,
        soldOut: `{{ 'products.product.sold_out' | t }}`,
        unavailable: `{{ 'products.product.unavailable' | t }}`,
        unavailable_with_option: `{{ 'products.product.value_unavailable' | t: option_value: '[value]' }}`,
      };

      window.quickOrderListStrings = {
        itemsAdded: `{{ 'sections.quick_order_list.items_added.other' | t: quantity: '[quantity]' }}`,
        itemAdded: `{{ 'sections.quick_order_list.items_added.one' | t: quantity: '[quantity]' }}`,
        itemsRemoved: `{{ 'sections.quick_order_list.items_removed.other' | t: quantity: '[quantity]' }}`,
        itemRemoved: `{{ 'sections.quick_order_list.items_removed.one' | t: quantity: '[quantity]' }}`,
        viewCart: `{{- 'sections.quick_order_list.view_cart' | t -}}`,
        each: `{{- 'sections.quick_order_list.each' | t: money: '[money]' }}`,
        min_error: `{{- 'sections.quick_order_list.min_error' | t: min: '[min]' }}`,
        max_error: `{{- 'sections.quick_order_list.max_error' | t: max: '[max]' }}`,
        step_error: `{{- 'sections.quick_order_list.step_error' | t: step: '[step]' }}`,
      };

      window.accessibilityStrings = {
        imageAvailable: `{{ 'products.product.media.image_available' | t: index: '[index]' }}`,
        shareSuccess: `{{ 'general.share.success_message' | t }}`,
        pauseSlideshow: `{{ 'sections.slideshow.pause_slideshow' | t }}`,
        playSlideshow: `{{ 'sections.slideshow.play_slideshow' | t }}`,
        recipientFormExpanded: `{{ 'recipient.form.expanded' | t }}`,
        recipientFormCollapsed: `{{ 'recipient.form.collapsed' | t }}`,
        countrySelectorSearchCount: `{{ 'localization.country_results_count' | t: count: '[count]' }}`,
      };





      /* pop up*/


    </script>

    
    <div id="cg-consent-root"></div>

{{ 'cg-consent.js' | asset_url | script_tag }}
    {%- if settings.predictive_search_enabled -%}
      <script src="{{ 'predictive-search.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}

    {%- if settings.cart_type == 'drawer' -%}
      <script src="{{ 'cart-drawer.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}
  
    {% render 'whatsapp-button' %}







<script>
/*
  ES-GATE Fix: ensure EasySell form opens.
  Replace previous script with this one (paste once before </body>).
  Behavior:
   - delegation capture to intercept "Commander"
   - shows FR consent modal ("Continuer")
   - on confirm: remove capture, dispatch gesture to pending trigger FIRST,
     then try multiple reveal strategies, and hide modal only after reveal (or after attempts)
   - keeps Conditions link to https://www.azorjewelry.com/pages/conditions-generales
*/
(function () {
  if (window.__es_consent_gate_final_fix) { console.info('[ES-GATE] final_fix already installed'); return; }
  window.__es_consent_gate_final_fix = true;

  const TERMS_URL = 'https://www.azorjewelry.com/pages/conditions-generales';
  const SELECTORS = [
    '#es-popup-button',
    '.es-popup-button-product',
    '.es-popup-button',
    '.cg-consent-hitbox',
    '.es-cta',
    '.es-checkout-btn',
    '#es-checkout',
    '#es-form-button'
  ];
  const isIOS = typeof navigator !== 'undefined' && /iP(ad|hone|od)/.test(navigator.userAgent);

  // FR texts
  const TEXTS = {
    title: 'Confirmation de commande',
    intro: "Avant de poursuivre, merci de lire et d'accepter nos Conditions générales.",
    checkboxHtml: `J'accepte les <a href="${TERMS_URL}" target="_blank" rel="noopener noreferrer" id="es-modal-conditions-link">Conditions générales</a>.`,
    confirm: 'Continuer',
    cancel: 'Annuler',
    error: "Vous devez accepter les Conditions générales pour poursuivre.",
    closeAria: 'Fermer la fenêtre de confirmation'
  };

  // -- helpers --
  function el(id){ return document.getElementById(id); }
  function hasClosest(el, sel){ try { return el && el.closest && el.closest(sel); } catch(e) { return null; } }
  function escapeHtml(s){ return String(s||'').replace(/[&<>"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])); }

  // inject minimal scoped CSS
  if (!el('es-gate-fix-css')) {
    const css = `
      #es-consent-overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:220000;display:none;align-items:center;justify-content:center;padding:20px;-webkit-overflow-scrolling:touch;}
      #es-consent-modal{width:100%;max-width:560px;background:#fff;border-radius:12px;padding:18px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;color:#111;position:relative;box-shadow:0 12px 40px rgba(0,0,0,.28);}
      #es-consent-modal h3{margin:0 0 8px;font-size:18px;font-weight:600;}
      #es-consent-modal .es-body{font-size:14px;line-height:1.45;color:#222;}
      #es-consent-modal .es-row{display:flex;gap:10px;align-items:flex-start;margin-top:14px;}
      #es-consent-modal .es-row input[type="checkbox"]{width:18px;height:18px;margin-top:3px;}
      #es-consent-modal .es-row label{font-size:14px;}
      #es-consent-modal .es-error{margin-top:12px;background:#fff3cd;color:#5c4700;border:1px solid #ffe8a1;padding:10px;border-radius:8px;display:none;}
      #es-consent-modal .es-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:18px;}
      #es-consent-modal .es-btn{padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:600;}
      #es-consent-modal .es-btn-primary{background:#000;color:#fff;}
      #es-consent-modal .es-btn-ghost{background:transparent;border:1px solid #ddd;color:#111;}
      #es-consent-modal .modal-close{position:absolute;right:12px;top:10px;background:transparent;border:none;font-size:18px;cursor:pointer;}
      #es-form.force-show{display:block !important; visibility:visible !important; opacity:1 !important;}
      @media(max-width:420px){ #es-consent-modal{padding:14px;} #es-consent-modal h3{font-size:16px;} }
    `;
    const st = document.createElement('style'); st.id = 'es-gate-fix-css'; st.appendChild(document.createTextNode(css)); document.head.appendChild(st);
  }

  // build modal if missing
  if (!el('es-consent-overlay')) {
    const overlay = document.createElement('div');
    overlay.id = 'es-consent-overlay';
    overlay.setAttribute('aria-hidden','true');
    overlay.innerHTML = `
      <div id="es-consent-modal" role="dialog" aria-modal="true" aria-labelledby="es-consent-title">
        <button class="modal-close" id="es-consent-close" aria-label="${escapeHtml(TEXTS.closeAria)}">✕</button>
        <h3 id="es-consent-title">${escapeHtml(TEXTS.title)}</h3>
        <div class="es-body">${escapeHtml(TEXTS.intro)}</div>
        <div class="es-row" style="align-items:flex-start;">
          <input id="es-consent-checkbox" type="checkbox" aria-describedby="es-consent-error" />
          <label for="es-consent-checkbox">${TEXTS.checkboxHtml}</label>
        </div>
        <div id="es-consent-error" class="es-error" role="alert">${escapeHtml(TEXTS.error)}</div>
        <div class="es-actions">
          <button type="button" class="es-btn es-btn-ghost" id="es-consent-cancel">${escapeHtml(TEXTS.cancel)}</button>
          <button type="button" class="es-btn es-btn-primary" id="es-consent-confirm">${escapeHtml(TEXTS.confirm)}</button>
        </div>
      </div>
    `;
    document.body.appendChild(overlay);
  }

  // modal refs
  const overlay = el('es-consent-overlay');
  const modal = el('es-consent-modal');
  const closeBtn = el('es-consent-close');
  const cancelBtn = el('es-consent-cancel');
  const confirmBtn = el('es-consent-confirm');
  const checkbox = el('es-consent-checkbox');
  const errBox = el('es-consent-error');

  function showModal(){ if(!overlay) return; overlay.style.display='flex'; overlay.setAttribute('aria-hidden','false'); if(checkbox){ checkbox.checked=false; checkbox.focus(); } if(errBox) errBox.style.display='none'; try{ document.body.style.overflow='hidden'; }catch(e){} }
  function hideModal(){ if(!overlay) return; overlay.style.display='none'; overlay.setAttribute('aria-hidden','true'); if(errBox) errBox.style.display='none'; try{ document.body.style.overflow=''; }catch(e){} }

  // modal basic controls
  closeBtn && closeBtn.addEventListener('click', hideModal);
  cancelBtn && cancelBtn.addEventListener('click', hideModal);
  overlay && overlay.addEventListener('click', function(e){ if(e.target===overlay) hideModal(); });
  document.addEventListener('keydown', function(e){ if(e.key==='Escape' && overlay && overlay.style.display==='flex') hideModal(); });

  // ensure initial hidden
  function ensureFormHidden() {
    try {
      const f = document.getElementById('es-form');
      if (!f) return;
      if (!f.dataset.esInitiallyHidden) {
        const cs = window.getComputedStyle(f);
        if (cs && cs.display !== 'none') {
          f.dataset.esInitiallyHidden='true';
          try { f.style.setProperty('display','none',''); } catch(e){ f.style.display='none'; }
        }
      }
    } catch(e){}
  }
  ensureFormHidden();

  // find same-origin iframe containing es-form
  function findEsFormInIframes(){
    try {
      const iframes = Array.from(document.getElementsByTagName('iframe'));
      for (const iframe of iframes){
        try {
          const doc = iframe.contentDocument || iframe.contentWindow.document;
          if(!doc) continue;
          const f = doc.getElementById('es-form');
          if(f) return { iframe, doc, form: f };
        } catch(e){ /* ignore cross-origin */ }
      }
    } catch(e){}
    return null;
  }

  // reveal helper - adds hidden attribute, hides modal when visible, sets up lifecycle monitor
  function revealEsFormOnce(){
    try {
      const f = document.getElementById('es-form');
      if (f) {
        if (f.dataset.esInitiallyHidden === 'true') delete f.dataset.esInitiallyHidden;
        try { f.style.removeProperty('display'); } catch(e){ f.style.display=''; }
        if (!f.classList.contains('force-show')) f.classList.add('force-show');
        try {
          let hidden = f.querySelector('input[name="attributes[agreed_to_conditions]"]');
          if (!hidden) { hidden = document.createElement('input'); hidden.type='hidden'; hidden.name='attributes[agreed_to_conditions]'; f.appendChild(hidden); }
          hidden.value='oui';
        } catch(e){}
        hideModal(); // only hide once form visible
        monitorEsFormLifecycle(f, document);
        console.info('[ES-GATE] revealed es-form (host)');
        return { ok:true, where:'host', form:f, doc:document };
      }

      const found = findEsFormInIframes();
      if (found) {
        const fi = found.form;
        if (fi.dataset.esInitiallyHidden === 'true') delete fi.dataset.esInitiallyHidden;
        try { fi.style.removeProperty('display'); } catch(e) { fi.style.display=''; }
        if (!fi.classList.contains('force-show')) fi.classList.add('force-show');
        try {
          let hidden = fi.querySelector('input[name="attributes[agreed_to_conditions]"]');
          if (!hidden) { hidden = found.doc.createElement('input'); hidden.type='hidden'; hidden.name='attributes[agreed_to_conditions]'; fi.appendChild(hidden); }
          hidden.value='oui';
        } catch(e){}
        hideModal();
        monitorEsFormLifecycle(fi, found.doc, found.iframe);
        console.info('[ES-GATE] revealed es-form (iframe)');
        return { ok:true, where:'iframe', form:fi, doc:found.doc, iframe:found.iframe };
      }

      return { ok:false };
    } catch(e){ console.warn('[ES-GATE] revealEsFormOnce', e); return { ok:false }; }
  }

  // monitor lifecycle so when es-form closes we ensure modal stays closed
  function monitorEsFormLifecycle(formNode, docContext, iframeNode){
    try {
      if (!formNode || formNode._es_monitored) return;
      formNode._es_monitored = true;

      const closeSelectors = ['.close-icon', '.es-close', '.close', '.text-black-50.close-icon'];

      // attach click handlers on existing close buttons
      closeSelectors.forEach(sel => {
        try {
          const nodes = Array.from(docContext.querySelectorAll(sel||''));
          nodes.forEach(n => n.addEventListener('click', function(){ try{ hideModal(); }catch(e){} }));
        } catch(e){}
      });

      // global click to catch dynamically added close buttons
      const docClick = function(ev){
        try {
          const tgt = ev.target;
          if (!tgt) return;
          const isClose = closeSelectors.some(sel => tgt.closest && tgt.closest(sel));
          if (isClose) hideModal();
        } catch(e){}
      };
      docContext.addEventListener('click', docClick, true);
      formNode._es_docClickHandler = docClick;

      // observe form for removal or attribute changes
      try {
        const mo = new (window.MutationObserver || window.WebKitMutationObserver)(function(mutations){
          try {
            for (const m of mutations) {
              if (m.type === 'childList') {
                const still = (formNode.ownerDocument || document).contains(formNode);
                if (!still) { hideModal(); disconnect(); return; }
              }
              if (m.type === 'attributes' && (m.attributeName === 'style' || m.attributeName === 'class')) {
                try {
                  const cs = (formNode.ownerDocument || document).defaultView.getComputedStyle(formNode);
                  if (!cs || cs.display === 'none' || cs.visibility === 'hidden' || Number(cs.opacity) === 0) {
                    hideModal();
                    // keep observing in case it's re-opened
                  }
                } catch(e){}
              }
            }
          } catch(e){}
        });
        mo.observe(formNode, { attributes:true, childList:true, subtree:false, attributeFilter:['style','class'] });
        formNode._es_mo = mo;

        // parent observer in case parent is swapped
        let parent = formNode.parentNode;
        if (parent) {
          const pmo = new (window.MutationObserver || window.WebKitMutationObserver)(function(mutations){
            try {
              const still = (formNode.ownerDocument || document).contains(formNode);
              if (!still) { hideModal(); disconnect(); return; }
            } catch(e){}
          });
          pmo.observe(parent, { childList:true });
          formNode._es_parentMo = pmo;
        }

        function disconnect(){
          try {
            if (formNode._es_mo) { formNode._es_mo.disconnect(); formNode._es_mo = null; }
            if (formNode._es_parentMo) { formNode._es_parentMo.disconnect(); formNode._es_parentMo = null; }
            if (formNode._es_docClickHandler) { docContext.removeEventListener('click', formNode._es_docClickHandler, true); formNode._es_docClickHandler = null; }
            try { delete formNode._es_monitored; } catch(e){}
          } catch(e){}
        }
      } catch(e){}
    } catch(e){ console.warn('[ES-GATE] monitorEsFormLifecycle', e); }
  }

  // synthetic gesture dispatcher
  function dispatchUserGestureOn(el){
    if (!el) return false;
    try {
      try { el.dispatchEvent(new PointerEvent('pointerdown', { bubbles:true, cancelable:true })); } catch(e){}
      try { el.dispatchEvent(new PointerEvent('pointerup', { bubbles:true, cancelable:true })); } catch(e){}
      try { el.dispatchEvent(new MouseEvent('mousedown', { bubbles:true, cancelable:true })); } catch(e){}
      try { el.dispatchEvent(new MouseEvent('mouseup', { bubbles:true, cancelable:true })); } catch(e){}
      try { el.dispatchEvent(new MouseEvent('click', { bubbles:true, cancelable:true })); } catch(e){}
      try { if (typeof el.click === 'function') el.click(); } catch(e){}
      return true;
    } catch(e){ console.warn('[ES-GATE] dispatchUserGestureOn', e); return false; }
  }

  // find same-origin iframe's likely trigger inside it
  function dispatchInsideIframe(found){
    try {
      if (!found || !found.iframe || !found.doc) return false;
      const btn = found.doc.getElementById('es-popup-button') || found.doc.querySelector('.es-popup-button') || found.doc.querySelector('.es-cta') || found.doc.querySelector('#es-checkout');
      if (btn) {
        try { btn.dispatchEvent(new MouseEvent('click', { bubbles:true, cancelable:true, view: found.iframe.contentWindow })); } catch(e){ try{ btn.click(); }catch(e2){} }
        return true;
      }
    } catch(e){ console.warn('[ES-GATE] dispatchInsideIframe', e); }
    return false;
  }

  // main opener after consent - critical ordering fixed:
  // 1) remove capture from pending and dispatch to it (so library receives user gesture)
  // 2) attempt reveal immediately and via other strategies
  async function openEasySellAfterConsent(pendingElement) {
    try {
      // Step A: If we have a pending element intercepted earlier, remove any capture handlers (if attached)
      try {
        if (pendingElement && pendingElement._es_capture_handler) {
          try {
            ['pointerdown','pointerup','touchstart','touchend','click'].forEach(type => {
              try { pendingElement.removeEventListener(type, pendingElement._es_capture_handler, { capture:true, passive:false }); } catch(e) {}
            });
          } catch(e){}
          // also clear flag so future interactions are not blocked
          pendingElement._es_capture_handler = null;
          pendingElement._es_capture_added = false;
        }
      } catch(e){}

      // Step B: dispatch user gesture to pendingElement first (most stores require the gesture)
      if (pendingElement) {
        try {
          const dispatched = dispatchUserGestureOn(pendingElement);
          await new Promise(r => setTimeout(r, dispatched ? (isIOS ? 140 : 40) : (isIOS ? 180 : 80)));
        } catch(e){}
      }

      // Step C: try to reveal immediately (maybe EasySell created the form now)
      let r = revealEsFormOnce();
      if (r.ok) return;

      // Step D: try calling global EasySell open APIs
      try {
        if (window.ESPopup && typeof window.ESPopup.open === 'function') { window.ESPopup.open(); await new Promise(r=>setTimeout(r, isIOS ? 140 : 40)); r = revealEsFormOnce(); if (r.ok) return; }
        if (window.easysell && typeof window.easysell.open === 'function') { window.easysell.open(); await new Promise(r=>setTimeout(r, isIOS ? 140 : 40)); r = revealEsFormOnce(); if (r.ok) return; }
      } catch(e){}

      // Step E: dispatch to known selectors on host
      const hostCandidates = ['#es-form-button','#es-checkout','.es-popup-button','.es-popup-button-product','.es-cta','.es-checkout-btn','.cg-consent-hitbox'];
      for (const sel of hostCandidates) {
        try {
          const el = document.querySelector(sel);
          if (el) {
            dispatchUserGestureOn(el);
            await new Promise(r => setTimeout(r, isIOS ? 140 : 40));
            r = revealEsFormOnce();
            if (r.ok) return;
          }
        } catch(e){}
      }

      // Step F: try same-origin iframe dispatch (maybe EasySell is inside iframe)
      const found = findEsFormInIframes();
      if (found) {
        const insideDispatched = dispatchInsideIframe(found);
        if (insideDispatched) {
          await new Promise(r => setTimeout(r, isIOS ? 160 : 60));
          r = revealEsFormOnce();
          if (r.ok) return;
        }
      }

      // Step G: retry loop for async mount
      const RETRY_MAX = 8;
      const RETRY_DELAY = isIOS ? 300 : 120;
      for (let i=0;i<RETRY_MAX;i++){
        await new Promise(r => setTimeout(r, RETRY_DELAY));
        r = revealEsFormOnce();
        if (r.ok) return;
      }

      // Step H: final forced reveal fallback (host)
      const finalForm = document.getElementById('es-form');
      if (finalForm) {
        try {
          finalForm.classList.add('force-show');
          finalForm.style.display = 'block';
          finalForm.style.opacity = '1';
          try {
            let h = finalForm.querySelector('input[name="attributes[agreed_to_conditions]"]');
            if (!h) { h = document.createElement('input'); h.type='hidden'; h.name='attributes[agreed_to_conditions]'; finalForm.appendChild(h); }
            h.value='oui';
          } catch(e){}
          hideModal();
          monitorEsFormLifecycle(finalForm, document);
          return;
        } catch(e){}
      }

      // last: if we failed, and pending exists, dispatch to pending again as a last-chance
      if (pendingElement) {
        try { dispatchUserGestureOn(pendingElement); } catch(e){}
      }
      console.warn('[ES-GATE] openEasySellAfterConsent: could not reveal es-form');
    } catch(e) { console.error('[ES-GATE] openEasySellAfterConsent error', e); }
  }

  // Delegation capture: listen at document level and open modal for target clicks
  let lastPending = null;
  function globalCaptureHandler(ev) {
    try {
      if (overlay && overlay.style.display === 'flex') return; // modal already open
      if (ev.button && ev.button !== 0) return; // only primary
      const target = ev.target;
      if (!target) return;
      // find closest matching selector
      let matched = null;
      for (const s of SELECTORS) {
        try {
          const found = target.closest && target.closest(s);
          if (found) { matched = found; break; }
        } catch(e){}
      }
      if (!matched) return;
      // intercept and store pending
      try { ev.stopImmediatePropagation(); } catch(e){}
      try { ev.preventDefault(); } catch(e){}
      lastPending = matched;
      showModal();
    } catch(e){}
  }
  document.addEventListener('pointerdown', globalCaptureHandler, true);
  document.addEventListener('touchstart', globalCaptureHandler, true);
  document.addEventListener('click', globalCaptureHandler, true);

  // keep initial form hidden if app re-renders
  try {
    const mo = new MutationObserver(() => { ensureFormHidden(); });
    mo.observe(document.body, { childList:true, subtree:true });
  } catch(e){}

  // Confirm click: validate checkbox, then critical ordering:
  // dispatch to pending first, then run reveal strategies, hide modal after reveal
  confirmBtn && confirmBtn.addEventListener('click', function () {
    try {
      if (!checkbox || !checkbox.checked) {
        if (errBox) errBox.style.display='block';
        if (checkbox) checkbox.focus();
        return;
      }
      if (errBox) errBox.style.display='none';
      // Run opener with lastPending
      openEasySellAfterConsent(lastPending).then(()=> { lastPending = null; });
    } catch(e){ console.warn('[ES-GATE] confirm handler', e); hideModal(); }
  });

  // safe click for conditions link (should open in new tab by default)
  document.addEventListener('click', function(e){
    try {
      const a = e.target.closest && e.target.closest('#es-modal-conditions-link');
      if (!a) return;
      // allow default (target=_blank exists)
    } catch(e){}
  });

  // expose debug helpers
  try {
    window.__es_gate_fix = window.__es_gate_fix || {};
    window.__es_gate_fix.openAfterConsent = openEasySellAfterConsent;
    window.__es_gate_fix.reveal = revealEsFormOnce;
    window.__es_gate_fix.pending = () => lastPending;
  } catch(e){}

  console.info('[ES-GATE] final_fix installed. On confirm the script will dispatch to pending then reveal es-form.');
})();
</script>




  </body>
</html>
